<section class="research-sites-scroller py-5 bg-light">
    <div class="container-fluid px-0">
        <!-- Section Header -->
        <div class="container mb-4">
            <span class="text-uppercase text-primary-custom fw-bold small d-block mb-2">Research Sites</span>
            <h2 class="mb-3">Global Research & Development Locations</h2>
            <p class="lead" style="max-width: 700px;">
                We have Research & Development colleagues across the world to support our product pipeline. 
                Details from major R&D locations are listed below.
            </p>
        </div>

        <!-- Horizontal Scroller Container -->
        <div class="position-relative">
            <!-- Scrolling Content -->
            <div class="research-scroller-container">
                <div class="research-scroller-track">
                    <!-- Andover, MA -->
                    <div class="research-card">
                        <div class="research-img-container">
                            <img src="https://cdn.pfizer.com/pfizercom/styles/convert_to_webp/s3/2022-08/andover_site-3-4---392x294.jpg.webp" 
                                 alt="Andover, Massachusetts Research Site" 
                                 class="img-fluid">
                        </div>
                        <div class="p-4">
                            <h5 class="mb-3">Andover, Massachusetts</h5>
                            <p>A 70-acre site that combines state-of-the-art R&D facilities with flexible, multi-product manufacturing capabilities.</p>
                            <a href="/about.php" class="btn btn-outline-primary-custom mt-2">Learn More</a>
                        </div>
                    </div>

                    <!-- Cambridge, MA -->
                    <div class="research-card">
                        <div class="research-img-container">
                            <img src="https://cdn.pfizer.com/pfizercom/styles/convert_to_webp/s3/2022-08/cambridge_site-3-4---392x294.jpg.webp" 
                                 alt="Cambridge, Massachusetts Research Site" 
                                 class="img-fluid">
                        </div>
                        <div class="p-4">
                            <h5 class="mb-3">Cambridge, Massachusetts</h5>
                            <p>Located in Kendall Square, our Cambridge site interlaces Pfizer's R&D capability with the densest biomedical community in the world.</p>
                            <a href="/about.php" class="btn btn-outline-primary-custom mt-2">Learn More</a>
                        </div>
                    </div>

                    <!-- Groton, CT -->
                    <div class="research-card">
                        <div class="research-img-container">
                            <img src="https://cdn.pfizer.com/pfizercom/styles/convert_to_webp/s3/2022-08/groton_site-3-4---392x294.jpg.webp" 
                                 alt="Groton, Connecticut Research Site" 
                                 class="img-fluid">
                        </div>
                        <div class="p-4">
                            <h5 class="mb-3">Groton, Connecticut</h5>
                            <p>Where nearly every one of our products are, in part, developed.</p>
                            <a href="/about.php" class="btn btn-outline-primary-custom mt-2">Learn More</a>
                        </div>
                    </div>

                    <!-- La Jolla, CA -->
                    <div class="research-card">
                        <div class="research-img-container">
                            <img src="https://cdn.pfizer.com/pfizercom/styles/convert_to_webp/s3/2025-05/La-Jolla.webp" 
                                 alt="La Jolla, California Research Site" 
                                 class="img-fluid">
                        </div>
                        <div class="p-4">
                            <h5 class="mb-3">La Jolla, California</h5>
                            <p>With more than 500,000 square feet of state-of-the-art facilities, this is where our scientists discover and develop cutting-edge cancer therapies.</p>
                            <a href="/about.php" class="btn btn-outline-primary-custom mt-2">Learn More</a>
                        </div>
                    </div>

                    <!-- Pearl River, NY -->
                    <div class="research-card">
                        <div class="research-img-container">
                            <img src="https://cdn.pfizer.com/pfizercom/styles/convert_to_webp/s3/2022-08/pearl_river_site-3-4---392x294.jpg.webp" 
                                 alt="Pearl River, New York Research Site" 
                                 class="img-fluid">
                        </div>
                        <div class="p-4">
                            <h5 class="mb-3">Pearl River, New York</h5>
                            <p>The primary location for our company's global Vaccine Research and Development work.</p>
                            <a href="/about.php" class="btn btn-outline-primary-custom mt-2">Learn More</a>
                        </div>
                    </div>

                    <!-- Sandwich, UK -->
                    <div class="research-card">
                        <div class="research-img-container">
                            <img src="https://cdn.pfizer.com/pfizercom/styles/convert_to_webp/s3/2022-08/discovery-park-v2-392x294.jpg.webp" 
                                 alt="Sandwich, UK Research Site" 
                                 class="img-fluid">
                        </div>
                        <div class="p-4">
                            <h5 class="mb-3">Sandwich, UK</h5>
                            <p>Home of the Pharmaceutical Sciences and Global Regulatory Affairs groups.</p>
                            <a href="/about.php" class="btn btn-outline-primary-custom mt-2">Learn More</a>
                        </div>
                    </div>

                    <!-- St. Louis, MO -->
                    <div class="research-card">
                        <div class="research-img-container">
                            <img src="https://cdn.pfizer.com/pfizercom/styles/convert_to_webp/s3/2022-08/Approved_ChesterfieldPicture_2022_External_392x294_0.jpg.webp" 
                                 alt="St. Louis, MO Research Site" 
                                 class="img-fluid">
                        </div>
                        <div class="p-4">
                            <h5 class="mb-3">St. Louis, MO</h5>
                            <p>A 300,000 sq. ft. facility producing innovative emergency care products that serve unique needs during severe medical crises.</p>
                            <a href="/about.php" class="btn btn-outline-primary-custom mt-2">Learn More</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Scrolling Line Controller -->
            <div class="scroller-line-container">
                <div class="scroller-line">
                    <div class="scroller-thumb"></div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
p.lead.mb-4 {
    color: #212529 !important;
}
    .text-primary-custom{
        color: #0a2240;
    }
    .btn-outline-primary-custom,
    .btn-outline-primary-custom:hover {
        color: #0a2240;
        border-color: #0a2240;
    }
    .research-sites-scroller {
        overflow: hidden;
    }
    
    .research-scroller-container {
        width: 100%;
        overflow-x: auto;
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
        padding-bottom: 15px;
    }
    
    .research-scroller-track {
        display: inline-flex;
        gap: 20px;
        padding: 0 20px 20px;
        min-width: 100%;
    }
    
    .research-card {
        flex: 0 0 350px;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        transition: transform 0.3s ease;
    }
    
    .research-card:hover {
        transform: translateY(-5px);
    }
    
    .research-img-container {
        height: 200px;
        overflow: hidden;
    }
    
    .research-img-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    /* Scroller line styles */
    .scroller-line-container {
        padding: 0 20px;
        margin-top: 10px;
    }
    
    .scroller-line {
        height: 4px;
        background: #e9ecef;
        border-radius: 2px;
        position: relative;
        cursor: pointer;
    }
    
    .scroller-thumb {
        position: absolute;
        height: 100%;
        background: #0d6efd;
        border-radius: 2px;
        width: 25%;
        min-width: 50px;
        transition: left 0.2s ease;
    }
    
    /* Hide scrollbar but keep functionality */
    .research-scroller-container::-webkit-scrollbar {
        display: none;
    }
    
    .research-scroller-container {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    
    @media (max-width: 768px) {
        .research-card {
            flex: 0 0 300px;
        }
        
        .research-scroller-track {
            gap: 15px;
            padding: 0 15px 15px;
        }
        
        .scroller-line-container {
            padding: 0 15px;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const scrollContainer = document.querySelector('.research-scroller-container');
        const scrollerTrack = document.querySelector('.research-scroller-track');
        const scrollerThumb = document.querySelector('.scroller-thumb');
        const scrollerLine = document.querySelector('.scroller-line');
        
        let isDragging = false;
        
        // Update thumb position based on scroll
        const updateThumbPosition = () => {
            const scrollRatio = scrollContainer.scrollLeft / (scrollContainer.scrollWidth - scrollContainer.clientWidth);
            const thumbPosition = scrollRatio * (scrollerLine.offsetWidth - scrollerThumb.offsetWidth);
            scrollerThumb.style.left = `${thumbPosition}px`;
        };
        
        // Handle scroll container events
        scrollContainer.addEventListener('scroll', updateThumbPosition);
        
        // Handle thumb drag events
        scrollerThumb.addEventListener('mousedown', (e) => {
            isDragging = true;
            document.addEventListener('mousemove', handleThumbDrag);
            document.addEventListener('mouseup', () => {
                isDragging = false;
                document.removeEventListener('mousemove', handleThumbDrag);
            });
        });
        
        // Handle touch events for mobile
        scrollerThumb.addEventListener('touchstart', (e) => {
            isDragging = true;
            document.addEventListener('touchmove', handleThumbDrag);
            document.addEventListener('touchend', () => {
                isDragging = false;
                document.removeEventListener('touchmove', handleThumbDrag);
            });
        });
        
        // Handle click on the line to jump to position
        scrollerLine.addEventListener('click', (e) => {
            if (isDragging) return;
            
            const clickPosition = e.clientX - scrollerLine.getBoundingClientRect().left;
            const thumbWidth = scrollerThumb.offsetWidth;
            const newLeft = Math.min(
                Math.max(0, clickPosition - thumbWidth / 2),
                scrollerLine.offsetWidth - thumbWidth
            );
            
            const scrollRatio = newLeft / (scrollerLine.offsetWidth - thumbWidth);
            const scrollPosition = scrollRatio * (scrollContainer.scrollWidth - scrollContainer.clientWidth);
            
            scrollContainer.scrollTo({
                left: scrollPosition,
                behavior: 'smooth'
            });
        });
        
        // Handle thumb dragging
        function handleThumbDrag(e) {
            if (!isDragging) return;
            
            let clientX;
            if (e.type === 'mousemove') {
                clientX = e.clientX;
            } else if (e.type === 'touchmove') {
                clientX = e.touches[0].clientX;
            }
            
            const lineRect = scrollerLine.getBoundingClientRect();
            const thumbWidth = scrollerThumb.offsetWidth;
            let newLeft = clientX - lineRect.left - thumbWidth / 2;
            
            // Constrain within bounds
            newLeft = Math.max(0, Math.min(newLeft, lineRect.width - thumbWidth));
            
            scrollerThumb.style.left = `${newLeft}px`;
            
            // Update scroll position
            const scrollRatio = newLeft / (lineRect.width - thumbWidth);
            const scrollPosition = scrollRatio * (scrollContainer.scrollWidth - scrollContainer.clientWidth);
            
            scrollContainer.scrollLeft = scrollPosition;
        }
        
        // Initialize thumb width and position
        function initThumb() {
            const visibleRatio = scrollContainer.clientWidth / scrollContainer.scrollWidth;
            const thumbWidth = Math.max(scrollerLine.offsetWidth * visibleRatio, 50);
            scrollerThumb.style.width = `${thumbWidth}px`;
            updateThumbPosition();
        }
        
        // Resize observer to handle responsive changes
        const resizeObserver = new ResizeObserver(initThumb);
        resizeObserver.observe(scrollContainer);
        resizeObserver.observe(scrollerLine);
        
        // Initial setup
        initThumb();
    });
</script>